# 医院预约与诊断系统  
## 前后端交互 API 文档

- 基础地址：`http://localhost:3435`
- 接口前缀：`/hospital`
- 数据格式：`application/json`
- 认证方式：`Token`（部分接口需要）

---

## 1. 用户认证相关接口

### 1.1 用户登录

**接口地址**

```

POST /hospital/login

````

**请求参数（JSON）**

```json
{
    "phone": "string",
    "password": "string"
}
````

**返回结果**

```json
{
    "status": true,
    "name": "string",
    "token": "string",
    "role": "patient | doctor | admin"
}
```

**说明**

* 登录成功后返回 `token`
* `token` 用于后续需要鉴权的接口

---

### 1.2 用户注册（学生）

**接口地址**

```
POST /hospital/register
```

**请求参数**

```json
{
    "phone": "string",
    "name": "string",
    "password": "string"
}
```

**返回结果**

```json
{
    "status": true
}
```

---

## 2. 管理员接口（医生 / 药品 / 科室）

> 以下接口需要 **管理员 token**

---

### 2.1 获取医生列表

**接口地址**

```
GET /hospital/doctor_list
```

**返回结果**

```json
[
    {
        "id": 1,
        "name": "string",
        "phone": "string",
        "department": "string"
    }
]
```

---

### 2.2 添加医生

**接口地址**

```
POST /hospital/add_doctor
```

**请求参数**

```json
{
    "token": "string",
    "name": "string",
    "phone": "string",
    "department": "string",
    "password": "string"
}
```

**返回结果**

```json
{
    "status": true,
    "id": 1
}
```

---

### 2.3 删除医生

**接口地址**

```
POST /hospital/delete_doctor
```

**请求参数**

```json
{
    "token": "string",
    "id": 1
}
```

**返回结果**

```json
{
    "status": true
}
```

---

### 2.4 获取药品列表

**接口地址**

```
GET /hospital/drug_list
```

**返回结果**

```json
[
    {
        "id": 1,
        "name": "string",
        "amount": 100
    }
]
```

---

### 2.5 添加药品

**接口地址**

```
POST /hospital/add_drug
```

**请求参数**

```json
{
    "token": "string",
    "name": "string",
    "amount": 100
}
```

**返回结果**

```json
{
    "status": true
}
```

---

### 2.6 删除药品

**接口地址**

```
POST /hospital/delete_drug
```

**请求参数**

```json
{
    "token": "string",
    "id": 1
}
```

**返回结果**

```json
{
    "status": true
}
```

---

### 2.7 获取科室列表

**接口地址**

```
GET /hospital/departments
```

**返回结果**

```json
{
    "data": [
        {
            "id": 1,
            "name": "string"
        }
    ]
}
```

---

## 3. 学生端接口（预约 / 就诊）

---

### 3.1 新增预约记录

**接口地址**

```
POST /hospital/add_record
```

**请求参数**

```json
{
    "token": "string",
    "department_id": 1,
    "doctor_id": 1,
    "complaint": "string",
    "date": "YYYY-MM-DD"
}
```

**返回结果**

```json
{
    "status": true
}
```

---

### 3.2 当前预约概览

**接口地址**

```
GET /hospital/current
```

**请求头**

```
token: <token>
```

**返回结果**

```json
{
    "status": true,
    "overview": "string",
    "time": "string",
    "department": "string",
    "progress": "pending | processing | done"
}
```

---

### 3.3 历史就诊记录

**接口地址**

```
GET /hospital/records_history
```

**请求头**

```
token: <token>
```

**返回结果**

```json
{
    "status": true,
    [
        {
            "name": "string",
            "complaint": "string",
            "diagnosis": "string",
            "time": "string",
            "department": "string",
            "drug": [
                {
                    "name": "string",
                    "amount": 1
                }
            ],
            "progress": "string"
        }
    ]
}
```

---

## 4. 医生端接口（诊断）

---

### 4.1 获取待处理记录列表

**接口地址**

```
GET /hospital/records_list
```

**请求头**

```
token: <token>
```

**返回结果**

```json
{
    "status": true,
    [
        {
            "name": "string",
            "record_id": 1
        }
    ]
}
```

---

### 4.2 获取单条就诊记录

**接口地址**

```
GET /hospital/record/{record_id}
```

**返回结果**

```json
{
    "status": true,
    "complaint": "string"
}
```

---

### 4.3 提交诊断结果

**接口地址**

```
POST /hospital/record
```

**请求参数**

```json
{
    "token": "string",
    "record_id": 1,
    "diagnosis": "string",
    "drug": [
        {
            "name": "string",
            "amount": 1
        }
    ]
}
```

**返回结果**

```json
{
    "status": true
}
```

---

## 5. 公共查询接口

### 5.1 按科室获取医生列表

**接口地址**

```
GET /hospital/doctors/{department}
```

**返回结果**

```json
{
    "data": [
        {
            "id": 1,
            "name": "string"
        }
    ]
}
```

---

## 6. 统一说明

### 6.1 status 字段

* `true`：请求成功
* `false`：请求失败（可扩展 error 字段）

### 6.2 Token 使用说明

* 登录成功后获取 token
* 需要鉴权的接口：

  * 管理员接口
  * 医生端接口
  * 学生预约 / 查询接口

---

